suite: test configmap
templates:
  - configmap.yaml
tests:
  - it: should create ConfigMap
    asserts:
      - isKind:
          of: ConfigMap
      - equal:
          path: metadata.name
          value: RELEASE-NAME-learn-ruby-config
      - equal:
          path: metadata.labels["app.kubernetes.io/part-of"]
          value: learn-ruby

  - it: should include correct labels
    asserts:
      - isSubset:
          path: metadata.labels
          content:
            app.kubernetes.io/name: learn-ruby
            app.kubernetes.io/instance: RELEASE-NAME

  - it: should have data section
    asserts:
      - isNotNull:
          path: data
      - equal:
          path: data.PORT
          value: "4567"
